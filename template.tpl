﻿___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "Kwanko SGTM template",
  "categories": ["AFFILIATE_MARKETING", "ADVERTISING"],
  "brand": {
    "id": "brand_dummy",
    "displayName": "Kwanko",
    "thumbnail": "data:image/png;base64,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"
  },
  "description": "Kwanko SGTM template",
  "containerContexts": [
    "SERVER"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "GROUP",
    "name": "trackingSetup",
    "displayName": "Kwanko tracking setup",
    "groupStyle": "NO_ZIPPY",
    "subParams": [
      {
        "type": "TEXT",
        "name": "mclic",
        "displayName": "Conversion tracking identifier (default - old client)",
        "simpleValueType": true,
        "valueValidators": [],
        "help": "Provided by Kwanko"
      },
      {
        "type": "TEXT",
        "name": "trkhost",
        "displayName": "First party tracking host",
        "simpleValueType": true
      },
      {
        "type": "TEXT",
        "name": "mclic_bis",
        "displayName": "Conversion tracking identifier (alternative - new client)",
        "simpleValueType": true
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "conversionParams",
    "displayName": "Conversion specific params",
    "groupStyle": "ZIPPY_CLOSED",
    "subParams": [
      {
        "type": "TEXT",
        "name": "argann",
        "displayName": "Transaction id",
        "simpleValueType": true
      },
      {
        "type": "TEXT",
        "name": "argmon",
        "displayName": "Transaction amount",
        "simpleValueType": true
      },
      {
        "type": "TEXT",
        "name": "currency",
        "displayName": "Custom currency ISO code",
        "simpleValueType": true
      },
      {
        "type": "TEXT",
        "name": "vouchercode",
        "displayName": "Voucher code",
        "simpleValueType": true
      },
      {
        "type": "TEXT",
        "name": "payname",
        "displayName": "Payment method",
        "simpleValueType": true
      },
      {
        "type": "TEXT",
        "name": "newclient",
        "displayName": "New client flag",
        "simpleValueType": true,
        "valueValidators": [
          {
            "type": "DECIMAL"
          }
        ]
      },
      {
        "type": "TEXT",
        "name": "gdpr",
        "displayName": "GDPR context",
        "simpleValueType": true,
        "valueHint": "1 if GDPR context applies, 0 if not",
        "valueValidators": [
          {
            "type": "DECIMAL"
          }
        ]
      },
      {
        "type": "TEXT",
        "name": "gdpr_consent",
        "displayName": "TCF v2 consent string",
        "simpleValueType": true
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "envParams",
    "displayName": "Environment params",
    "groupStyle": "ZIPPY_CLOSED",
    "subParams": [
      {
        "type": "TEXT",
        "name": "page_location",
        "displayName": "Page location",
        "simpleValueType": true,
        "help": "Required if not provided through event data !"
      },
      {
        "type": "CHECKBOX",
        "name": "debug_mode",
        "checkboxText": "Enable debug mode",
        "simpleValueType": true,
        "help": "Will add some detailed logs in console"
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "customParams",
    "displayName": "Custom parameters",
    "groupStyle": "ZIPPY_CLOSED",
    "subParams": [
      {
        "type": "SIMPLE_TABLE",
        "name": "customParamsTable",
        "displayName": "",
        "simpleTableColumns": [
          {
            "defaultValue": "",
            "displayName": "Parameter name",
            "name": "custname",
            "type": "TEXT"
          },
          {
            "defaultValue": "",
            "displayName": "Parameter value",
            "name": "custvalue",
            "type": "TEXT"
          }
        ]
      }
    ]
  }
]


___SANDBOXED_JS_FOR_SERVER___

const logToConsole        = require('logToConsole');
const getType             = require('getType');
const encodeUriComponent  = require('encodeUriComponent');
const getContainerVersion = require('getContainerVersion');
const parseUrl            = require('parseUrl');
const setCookie           = require('setCookie');
const getCookieValues     = require('getCookieValues');
const sendHttpRequest     = require('sendHttpRequest');
const getAllEventData     = require('getAllEventData');
const makeInteger         = require('makeInteger');

const SGTM_KWANKO_VERSION = 'v1.0';
const KWKUNIV_COOKIE_NAME = 'kwku';
const KWK_DEFAULT_TRKHOST = 'action.metaffiliation.com';

const debugMode    = debugEnabled();
const eventData    = getAllEventData();
const eventName    = eventData.event_name;
const currentPage  = data.pageLocation || eventData.page_location;
const trkHost      = data.trkhost || KWK_DEFAULT_TRKHOST;
const mclic        = data.mclic || '';
const mclicBis     = data.mclic_bis || '';
const isFirstParty = trkHost !== KWK_DEFAULT_TRKHOST;
const kwkCookies   = ['netases','neta_ssc','neta','kwkncses','kwknc_ssc','kwknc'];

debugMsg('START exec');

debugMsg('Data :');
debugMsg(data);
debugMsg('Event data :');
debugMsg(eventData);

// ## PAGE VIEW EVENT ##
if (eventName === 'page_view') {

  debugMsg('Page view event');

  const urlObject = parseUrl(currentPage);
  const kwkuniv   = (urlObject && urlObject.searchParams.kwkuniv) || '';
  const cookieOptions =
    {
      domain: 'auto',
      path: '/',
      secure: true,
      httpOnly: false,
      sameSite: 'none',
     'max-age': 5184000
    };

  if (kwkuniv && kwkuniv.length > 0) {
    setCookie(KWKUNIV_COOKIE_NAME, kwkuniv, cookieOptions, false);
    debugMsg('Set cookie ' + KWKUNIV_COOKIE_NAME + ' with value ' + kwkuniv);
  }
  else {
    for (let cookieName of kwkCookies) {
      let cookieValue  = getCookieValues(cookieName)[0];
      let cookiePrefix = 'sgtm' + (cookieName.substring(0,1)) + '_';
      if (cookieValue && cookieValue.length > 0) {
        setCookie(KWKUNIV_COOKIE_NAME, cookiePrefix + cookieValue, cookieOptions, false);
        debugMsg('Set cookie ' + KWKUNIV_COOKIE_NAME + ' with value ' + cookiePrefix + cookieValue);
        break;
      }
    }
  }
}
// ## CONVERSION TRACKING EVENT ##
else if (eventName === 'purchase') {

  debugMsg('Purchase event');

  const trkHost             = data.trkhost || KWK_DEFAULT_TRKHOST;
  const univFromCookieValue = getCookieValues(KWKUNIV_COOKIE_NAME)[0];
  const argannValue         = data.argann || eventData.transaction_id;
  const argmonValue         = data.argmon || eventData.value || 0;
  const currency            = data.currency || eventData.currency || '';
  const newclient           = data.newclient || 0;
  const gdpr                = data.gdpr || 0;
  const gdprConsent         = data.gdpr_consent || '';
  const userAgent           = data.userAgent || eventData.userAgent || '';
  const voucherCode         = data.vouchercode || '';
  const payName             = data.payname || '';

  let trkCode = mclic;
  let customParamsQueryString = '';
  const processedCustomParams = [];
  for (let key in data.customParamsTable) {
    const customParams = data.customParamsTable[key];
    if (processedCustomParams.indexOf(customParams.custname) !== -1) {
      continue;
    }

    if (customParams.custname === 'mclic') {
      debugMsg('Init trkcode from custom param : ' + customParams.custvalue);
      trkCode = customParams.custvalue;
      continue;
    }
    else if (customParams.custvalue === undefined || customParams.custvalue.length == 0) {
      continue;
    }

    processedCustomParams.push(customParams.custname);
    customParamsQueryString += '&'+customParams.custname.toLowerCase() + '=' + safeEncodeUriComponent(customParams.custvalue);
  }

  if (makeInteger(newclient) === 1 && mclicBis.length > 0) {
    trkCode = mclicBis;
  }

  debugMsg('Univ value from cookie : ' + univFromCookieValue);

  const requestUrl = 'https://' + trkHost + '/' + (isFirstParty ? '' : 'trk.php');
  const requestOptions = {
    method: 'GET',
    timeout: 500,
  };

  let requestBody = '';
  requestBody += (isFirstParty ? trkCode : 'mclic='+trkCode);
  requestBody += (univFromCookieValue !== undefined ? '&'+'kwkuniv=' + safeEncodeUriComponent(univFromCookieValue) : '');
  requestBody += '&'+'argann=' + safeEncodeUriComponent(argannValue);
  requestBody += (argmonValue ? '&argmon=' + argmonValue : '');
  requestBody += (currency.length > 0 ? '&nacur=' + currency : '');
  requestBody += (voucherCode.length > 0 ? '&argbr=' + voucherCode : '');
  requestBody += (payName.length > 0 ? '&argmodp=' + payName : '');
  requestBody += (makeInteger(gdpr) === 0 ? '&gdpr=0' : '&gdpr=1');
  requestBody += (gdprConsent.length > 0 ? '&gdpr_consent='+gdprConsent : '');
  requestBody += '&sgtmv='+SGTM_KWANKO_VERSION;
  requestBody += (debugMode ? '&__nadebug=1' : '');
  requestBody += (customParamsQueryString.length > 0 ? customParamsQueryString : '');

  debugMsg('Tracking url : '+ requestUrl + '?' + requestBody);

  let cookieHeaders = '';
  for (const cookieName of kwkCookies) {
    let cookieValue = getCookieValues(cookieName)[0];
    if (cookieValue && cookieValue.length > 0) {
      cookieHeaders += (cookieHeaders.length == 0 ? '' : ';')+cookieName+'='+cookieValue;
    }
  }

  requestOptions.headers = {};
  if (cookieHeaders.length > 0) {
    requestOptions.headers.Cookie = cookieHeaders;
    debugMsg('Adding cookie headers with value ' + cookieHeaders);
  }
  if (userAgent.length > 0) {
    requestOptions.headers['User-Agent'] = userAgent;
  }

  sendHttpRequest(
    requestUrl+ '?' + requestBody,
    requestOptions
  ).then((result) => {
    debugMsg('trk status code '+result.statusCode);
    if (result.statusCode >= 200 && result.statusCode < 300) {
      return data.gtmOnSuccess();
    } else {
      return data.gtmOnFailure();
    }
  });
}

return data.gtmOnSuccess();

// #############
// # FUNCTIONS #
// #############

function safeEncodeUriComponent(rawValue) {
  rawValue = rawValue || '';
  return encodeUriComponent(rawValue);
}

function debugEnabled() {
  const containerVersion = getContainerVersion();
  const containerDebug = !!(containerVersion && (containerVersion.debugMode || containerVersion.previewMode));

  if (!data.debug_mode) {
    return containerDebug;
  }

  return data.debug_mode;
}

function debugMsg (message) {
  if (debugMode) {
    if (getType(message) === 'object') {
      logToConsole(message);
    }
    else {
      logToConsole('KWK-SGTM-debug : ' + message);
    }
  }
}


___SERVER_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "all"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "read_event_data",
        "versionId": "1"
      },
      "param": [
        {
          "key": "eventDataAccess",
          "value": {
            "type": 1,
            "string": "any"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "set_cookies",
        "versionId": "1"
      },
      "param": [
        {
          "key": "allowedCookies",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "name"
                  },
                  {
                    "type": 1,
                    "string": "domain"
                  },
                  {
                    "type": 1,
                    "string": "path"
                  },
                  {
                    "type": 1,
                    "string": "secure"
                  },
                  {
                    "type": 1,
                    "string": "session"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "kwku"
                  },
                  {
                    "type": 1,
                    "string": "*"
                  },
                  {
                    "type": 1,
                    "string": "*"
                  },
                  {
                    "type": 1,
                    "string": "any"
                  },
                  {
                    "type": 1,
                    "string": "any"
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "get_cookies",
        "versionId": "1"
      },
      "param": [
        {
          "key": "cookieAccess",
          "value": {
            "type": 1,
            "string": "specific"
          }
        },
        {
          "key": "cookieNames",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "kwku"
              },
              {
                "type": 1,
                "string": "kwknc"
              },
              {
                "type": 1,
                "string": "kwkncses"
              },
              {
                "type": 1,
                "string": "kwknc_ssc"
              },
              {
                "type": 1,
                "string": "neta"
              },
              {
                "type": 1,
                "string": "netases"
              },
              {
                "type": 1,
                "string": "neta_ssc"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "read_container_data",
        "versionId": "1"
      },
      "param": []
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "send_http",
        "versionId": "1"
      },
      "param": [
        {
          "key": "allowedUrls",
          "value": {
            "type": 1,
            "string": "any"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios: []


___NOTES___

Created on 03/03/2025 17:42:36
